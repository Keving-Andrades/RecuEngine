import{Register}from"./formsHandler.js";const handlerFunctionListener={},escapeCloseElement=element=>{const elementName=element.getAttribute("class").split(" ")[0]+"_onEscapeKey";return handlerFunctionListener[elementName]||(handlerFunctionListener[elementName]=key=>{"Escape"===key.code&&(window.removeEventListener("keydown",escapeCloseElement(element)),document.removeEventListener("click",clickCloseElement(element)),element.classList.remove("show"))})},clickCloseElement=element=>{const elementName=element.getAttribute("class").split(" ")[0]+"_onClick";return handlerFunctionListener[elementName]||(handlerFunctionListener[elementName]=click=>{click.target.classList.contains("userMenu")||click.target.classList.contains("userMenuSpan")||(window.removeEventListener("keydown",escapeCloseElement(element)),document.removeEventListener("click",clickCloseElement(element)),element.classList.remove("show"))})};document.addEventListener("DOMContentLoaded",()=>{alertBox();const loggedUser=document.getElementById("loggedUser");if(loggedUser){const userMenu=loggedUser.querySelector(".userMenu");loggedUser.addEventListener("click",()=>{userMenu.classList.contains("show")||(userMenu.classList.add("show"),setTimeout(()=>{userMenu.classList.contains("show")&&(window.addEventListener("keydown",escapeCloseElement(userMenu)),document.addEventListener("click",clickCloseElement(userMenu)))},300))})}if("RecuEngine - Iniciar SesiÃ³n"===document.title&&checkForm(),"RecuEngine - Registrarse"===document.title){const formViews=document.getElementById("formViews"),formNavbar=document.getElementById("formNavbar"),nextBtn=document.getElementById("signInUpBtn"),registerForm=document.getElementById("signInUpForm"),register=new Register(formViews,formNavbar,nextBtn,registerForm);register.activate(),register.currentActiveForm().classList.contains("form1")&&Array.from(register.currentActiveForm().children[1].children).forEach(e=>{e.classList.contains("type")&&e.addEventListener("click",()=>{e.classList.contains("active")||(Array.from(register.currentActiveForm().children[1].children).forEach(e=>{e.classList.contains("active")&&(e.classList.remove("active"),e.classList.add("inactive"))}),e.classList.contains("inactive")&&e.classList.remove("inactive"),e.classList.add("active"),register.currentActiveForm().querySelector("input").value=e.children[1].innerText),register.currentActiveForm().classList.contains("valid")||(register.currentActiveForm().classList.add("valid"),register.currentActiveForm().classList.add("ready"),register.triggerFormEvent(register.currentActiveForm(),!0,!1)),register.currentActiveForm().children[0].classList.contains("invalid")&&register.currentActiveForm().children[0].classList.remove("invalid")})})}});const alertBox=()=>{const alertBox=document.querySelector(".alertBox"),alertBoxCloseBtn=document.querySelector(".alertBox__container--close");if(null!==alertBox){alertBoxCloseBtn.addEventListener("click",()=>{closeAlertBox()}),setTimeout(()=>{alertBox.classList.add("show")},100),setTimeout(()=>{closeAlertBox()},7200);const closeAlertBox=()=>{alertBox.classList.remove("show"),setTimeout(()=>{alertBox.remove()},200)}}},checkForm=()=>{const signInForm=document.getElementById("signInUpForm"),signInBtn=document.getElementById("signInUpBtn");for(let i=0;i<signInForm.elements.length;i++)signInForm.elements[i].addEventListener("keyup",()=>{1==signInForm.checkValidity()?signInBtn.classList.add("next"):signInBtn.classList.remove("next")});signInBtn.addEventListener("click",()=>{if(signInBtn.classList.contains("next"))signInForm.submit();else for(let i=0;i<signInForm.elements.length;i++)if(0==signInForm[i].value.length||0==signInForm[i].checkValidity()){signInForm[i].focus();break}})};